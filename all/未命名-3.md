```mermaid
graph TB
    User[ External Entity: User ]
    ProcessRequest[ Process: Process Request ]
    FilterSensitiveImages[ Process: Filter Sensitive Images ]
    RecognizeDishes[ Process: Recognize Dishes ]
    GenerateDietarySuggestions[ Process: Generate Dietary Suggestions ]
    QueryKnowledgeGraph[ Process: Query Knowledge Graph ]
    UserData[ Data Store: User Data ]
    KnowledgeGraph[ Data Store: Knowledge Graph ]

    User --> ProcessRequest: images, meal time, number of people
    ProcessRequest --> UserData: retrieve user situation
    ProcessRequest --> FilterSensitiveImages: images
    FilterSensitiveImages --> ProcessRequest: filtered images
    ProcessRequest --> RecognizeDishes: filtered images
    RecognizeDishes --> ProcessRequest: recognized dish names
    ProcessRequest --> GenerateDietarySuggestions: recognized dish names, user situation
    GenerateDietarySuggestions --> ProcessRequest: dietary improvement suggestions
    ProcessRequest --> QueryKnowledgeGraph: recognized dish names, user situation
    QueryKnowledgeGraph --> KnowledgeGraph: query
    KnowledgeGraph --> QueryKnowledgeGraph: new dish suggestions
    QueryKnowledgeGraph --> ProcessRequest: new dish suggestions
    ProcessRequest --> User: recognized dish names, dietary improvement suggestions, new dish suggestions
```